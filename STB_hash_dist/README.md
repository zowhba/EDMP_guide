# 📡 STB 슬롯 분배 분석기

STB_ID 목록을 입력받아 SHA-256 해시 기반으로 1~100 사이의 슬롯 번호를 계산하고, 분배 결과와 통계를 시각화하는 Streamlit 웹 애플리케이션입니다.

## 🚀 주요 기능

- **대용량 데이터 처리**: 수십만 건의 STB_ID를 배치 처리로 효율적으로 계산
- **실시간 진행률 표시**: 처리 진행 상황을 실시간으로 모니터링
- **다양한 시각화**: 막대 차트, 히트맵으로 슬롯 분포 시각화
- **상세 통계**: 슬롯별 STB 수, 비율, 사용되지 않은 슬롯 등 상세 분석
- **결과 다운로드**: 계산 결과와 통계 요약을 CSV 형태로 다운로드

## 📋 요구사항

- Python 3.8+
- Streamlit 1.28.1+
- Pandas 2.1.3+
- NumPy 1.25.2+
- Plotly 5.17.0+

## 🛠️ 설치 및 실행

### 1. 의존성 설치
```bash
pip install -r requirements.txt
```

### 2. 앱 실행
```bash
streamlit run app.py
```

### 3. 브라우저에서 접속
```
http://localhost:8501
```

## 📁 입력 파일 형식

### CSV/텍스트 파일
STB_ID를 각 줄에 하나씩 입력합니다:

```
{4655F3A8-D531-11E5-9115-01A83A673161}
{DC186E50-CECD-11EE-AFAE-7787E87EF42F}
{A1B2C3D4-E5F6-11EE-1234-567890ABCDEF}
```

## 🔧 설정 옵션

- **배치 크기**: 한 번에 처리할 STB_ID 수 (1,000 ~ 50,000)
  - 작은 배치: 메모리 사용량 적음, 진행률 표시 정밀
  - 큰 배치: 처리 속도 빠름, 메모리 사용량 증가

## 📊 출력 결과

### 1. 요약 통계
- 총 STB 수
- 사용된 슬롯 수
- 최소/최대 슬롯당 STB 수

### 2. 시각화
- **막대 차트**: 슬롯별 STB 분포
- **히트맵**: 10x10 그리드로 슬롯 분포 표시

### 3. 상세 통계
- 슬롯 1~100별 STB 수와 비율
- 사용되지 않은 슬롯 목록

### 4. 다운로드 파일
- `stb_slot_results_[개수].csv`: STB_ID와 할당된 슬롯 번호
- `stb_slot_summary_[개수].csv`: 슬롯별 통계 요약

## ⚡ 성능 최적화

- **배치 처리**: 메모리 효율적인 대용량 데이터 처리
- **진행률 표시**: 사용자 경험 향상을 위한 실시간 피드백
- **효율적인 해시 계산**: SHA-256 알고리즘 최적화

## 🧪 테스트 기능

앱 내에서 샘플 데이터로 기능을 테스트할 수 있습니다:
- 5개의 샘플 STB_ID로 슬롯 계산 테스트
- 실제 데이터 업로드 전 기능 확인 가능

## 🔍 알고리즘 설명

1. **STB_ID 인코딩**: UTF-8로 바이트 변환
2. **SHA-256 해시**: 암호학적으로 안전한 해시 함수 적용
3. **슬롯 계산**: `(해시값 % 100) + 1`로 1~100 슬롯 할당
4. **분배 균등성**: 해시 함수의 특성상 균등한 분배 보장

## 📝 사용 예시

1. CSV 파일 업로드
2. 배치 크기 설정 (권장: 10,000)
3. "슬롯 계산 시작" 버튼 클릭
4. 진행률 모니터링
5. 결과 및 통계 확인
6. 필요시 결과 다운로드

## 🚨 주의사항

- 매우 큰 파일(수백만 건)의 경우 처리 시간이 오래 걸릴 수 있습니다
- 메모리 사용량을 고려하여 적절한 배치 크기를 설정하세요
- 결과 파일은 UTF-8 BOM 인코딩으로 저장됩니다

## 🤝 문제 해결

### 일반적인 오류
- **파일 인코딩 오류**: UTF-8 형식으로 파일을 저장하세요
- **메모리 부족**: 배치 크기를 줄여보세요
- **처리 속도 느림**: 배치 크기를 늘려보세요

### 성능 개선 팁
- SSD 사용 시 파일 읽기 속도 향상
- 충분한 RAM 확보 (최소 4GB 권장)
- 적절한 배치 크기 설정으로 메모리와 속도 균형 맞추기
